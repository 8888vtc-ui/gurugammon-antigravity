
> gammon-guru-backend@1.0.0 test
> jest

node.exe : PASS tests/quota.test.ts
Au caractère Ligne:1 : 1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo              : NotSpecified: (PASS te    sts/quota.test.ts:String    ) [], RemoteException
    + FullyQualifiedErrorId     : NativeCommandError
 
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒöä add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (src/controllers/gnubgController.ts:5:1)
      at Object.<anonymous> (src/routes/gnubg.ts:5:1)
      at Object.<anonymous> (tests/quota.test.ts:120:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (src/controllers/gnubgController.ts:5:1)
      at Object.<anonymous> (src/routes/gnubg.ts:5:1)
      at Object.<anonymous> (tests/quota.test.ts:120:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (src/controllers/gnubgController.ts:5:1)
      at Object.<anonymous> (src/routes/gnubg.ts:5:1)
      at Object.<anonymous> (tests/quota.test.ts:120:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (src/controllers/gnubgController.ts:5:1)
      at Object.<anonymous> (src/routes/gnubg.ts:5:1)
      at Object.<anonymous> (tests/quota.test.ts:120:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (src/controllers/gnubgController.ts:5:1)
      at Object.<anonymous> (src/routes/gnubg.ts:5:1)
      at Object.<anonymous> (tests/quota.test.ts:120:1)

    console.debug
      [2025-12-18T15:51:57.422Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 4,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.501Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 3,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.505Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 2,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.509Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 1,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.514Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.warn
      [2025-12-18T15:51:57.519Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-user',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at Object.getHint (src/services/gnubgService.ts:323:7)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.error
      [2025-12-18T15:51:57.520Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at Object.getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\controllers\gnubgController.ts:36:18) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at Object.getHint (src/services/gnubgService.ts:328:12)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.debug
      [2025-12-18T15:51:57.651Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 9,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.655Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 8,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.659Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 7,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.663Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 6,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.667Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 5,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.670Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 4,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.673Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 3,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.676Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 2,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.680Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 1,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.684Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-user',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.warn
      [2025-12-18T15:51:57.687Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'premium-user',
        plan: 'premium',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at Object.getHint (src/services/gnubgService.ts:323:7)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.error
      [2025-12-18T15:51:57.687Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at Object.getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\controllers\gnubgController.ts:36:18) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at Object.getHint (src/services/gnubgService.ts:328:12)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.debug
      [2025-12-18T15:51:57.696Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'extra-user',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 2
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.699Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'extra-user',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 1
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.702Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'extra-user',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.warn
      [2025-12-18T15:51:57.705Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'extra-user',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at Object.getHint (src/services/gnubgService.ts:323:7)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.error
      [2025-12-18T15:51:57.706Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at Object.getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\controllers\gnubgController.ts:36:18) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at Object.getHint (src/services/gnubgService.ts:328:12)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.debug
      [2025-12-18T15:51:57.713Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 4,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.717Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 3,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.721Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 2,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.724Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 1,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.729Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.warn
      [2025-12-18T15:51:57.732Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-user',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at Object.getHint (src/services/gnubgService.ts:323:7)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.error
      [2025-12-18T15:51:57.732Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at Object.getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\controllers\gnubgController.ts:36:18) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at Object.getHint (src/services/gnubgService.ts:328:12)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.debug
      [2025-12-18T15:51:57.740Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 1
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:57.744Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-user',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.warn
      [2025-12-18T15:51:57.748Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-user',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at Object.getHint (src/services/gnubgService.ts:323:7)
      at getHint (src/controllers/gnubgController.ts:36:18)

    console.error
      [2025-12-18T15:51:57.748Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at Object.getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\controllers\gnubgController.ts:36:18) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at Object.getHint (src/services/gnubgService.ts:328:12)
      at getHint (src/controllers/gnubgController.ts:36:18)

PASS tests/auth.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/controllers/authController.ts:8:1)
      at Object.<anonymous> (src/routes/auth.ts:3:1)
      at Object.<anonymous> (tests/auth.test.ts:18:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: [
        { key: 'ACCESS_TOKEN_SECRET', status: '18 chars' },
        { key: 'REFRESH_TOKEN_SECRET', status: '19 chars' }
      ]

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/controllers/authController.ts:8:1)
      at Object.<anonymous> (src/routes/auth.ts:3:1)
      at Object.<anonymous> (tests/auth.test.ts:18:1)

PASS tests/matchmaking/matchmakingController.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒöÉ prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingController.test.ts:4:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingController.test.ts:4:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingController.test.ts:4:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingController.test.ts:4:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingController.test.ts:4:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

PASS tests/tournament/tournamentRoutes.test.ts
PASS tests/leaderboard/leaderboardWebsocket.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardWebsocket.test.ts:24:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: [
        { key: 'ACCESS_TOKEN_SECRET', status: '18 chars' },
        { key: 'REFRESH_TOKEN_SECRET', status: '19 chars' }
      ]

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardWebsocket.test.ts:24:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

PASS tests/rateLimiter.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:75:27)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:75:27)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:75:27)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:75:27)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:75:27)

    console.warn
      [2025-12-18T15:51:58.387Z] [RateLimiter] WARN: Rate limit exceeded { scope: 'auth', key: 'ip:::ffff:127.0.0.1', limit: 2, windowMs: 1000 }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at Object.handler (src/middleware/rateLimiter.ts:95:14)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  override existing env vars with { override: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:89:27)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:89:27)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:89:27)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:89:27)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:89:27)

    console.warn
      [2025-12-18T15:51:58.425Z] [RateLimiter] WARN: Rate limit exceeded { scope: 'gnubg', key: 'user:user-123', limit: 1, windowMs: 1000 }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at Object.handler (src/middleware/rateLimiter.ts:95:14)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒæÑ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:101:27)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:101:27)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:101:27)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:101:27)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:101:27)

    console.warn
      [2025-12-18T15:51:58.450Z] [RateLimiter] WARN: Rate limit exceeded { scope: 'auth', key: 'ip:::ffff:127.0.0.1', limit: 1, windowMs: 100 }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at Object.handler (src/middleware/rateLimiter.ts:95:14)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:117:27)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:117:27)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:117:27)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:117:27)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:117:27)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒùé´©Å backup and recover secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:128:27)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:128:27)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:128:27)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:128:27)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/middleware/rateLimiter.ts:5:1)
      at tests/rateLimiter.test.ts:33:30
      at setupApp (tests/rateLimiter.test.ts:31:8)
      at Object.<anonymous> (tests/rateLimiter.test.ts:128:27)

PASS tests/game.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒöÉ prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (src/controllers/matchmakingController.ts:3:1)
      at Object.<anonymous> (src/routes/games.ts:18:1)
      at Object.<anonymous> (tests/game.test.ts:18:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (src/controllers/matchmakingController.ts:3:1)
      at Object.<anonymous> (src/routes/games.ts:18:1)
      at Object.<anonymous> (tests/game.test.ts:18:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (src/controllers/matchmakingController.ts:3:1)
      at Object.<anonymous> (src/routes/games.ts:18:1)
      at Object.<anonymous> (tests/game.test.ts:18:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (src/controllers/matchmakingController.ts:3:1)
      at Object.<anonymous> (src/routes/games.ts:18:1)
      at Object.<anonymous> (tests/game.test.ts:18:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/websocket/server.ts:22:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (src/controllers/matchmakingController.ts:3:1)
      at Object.<anonymous> (src/routes/games.ts:18:1)
      at Object.<anonymous> (tests/game.test.ts:18:1)

PASS tests/aiProvider.test.ts
  ÔùÅ Console

    console.log
      [2025-12-18T15:51:58.576Z] [GNUBGProvider] INFO: GNUBG request started { path: '/analyze', attempt: 0 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:58.635Z] [GNUBGProvider] INFO: GNUBG request started { path: '/analyze', attempt: 0 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:58.636Z] [GNUBGProvider] INFO: GNUBG retry scheduled { path: '/analyze', attempt: 0, backoff: 500 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.145Z] [GNUBGProvider] INFO: GNUBG request started { path: '/analyze', attempt: 1 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.147Z] [GNUBGProvider] INFO: GNUBG request succeeded { path: '/analyze', attempt: 1, duration: 2 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.147Z] [GNUBGProvider] INFO: GNUBG request succeeded, resetting failure count

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.149Z] [GNUBGProvider] INFO: GNUBG request started { path: '/analyze', attempt: 0 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.151Z] [GNUBGProvider] INFO: GNUBG request started { path: '/analyze', attempt: 0 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.152Z] [GNUBGProvider] INFO: GNUBG request started { path: '/analyze', attempt: 0 }

      at Logger.info (src/utils/logger.ts:11:13)

PASS tests/leaderboard/leaderboardRoutes.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒùé´©Å backup and recover secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (src/routes/leaderboards.ts:2:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardRoutes.test.ts:25:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: [
        { key: 'ACCESS_TOKEN_SECRET', status: '18 chars' },
        { key: 'REFRESH_TOKEN_SECRET', status: '19 chars' }
      ]

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (src/routes/leaderboards.ts:2:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardRoutes.test.ts:25:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

PASS tests/leaderboard/leaderboardController.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardController.test.ts:18:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardController.test.ts:18:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardController.test.ts:18:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardController.test.ts:18:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/leaderboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/leaderboardController.ts:3:1)
      at Object.<anonymous> (tests/leaderboard/leaderboardController.test.ts:18:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

PASS tests/tournament/tournamentWebsocket.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/websocket/tournamentServer.ts:5:1)
      at Object.<anonymous> (tests/tournament/tournamentWebsocket.test.ts:20:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: [
        { key: 'ACCESS_TOKEN_SECRET', status: '18 chars' },
        { key: 'REFRESH_TOKEN_SECRET', status: '19 chars' }
      ]

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/websocket/tournamentServer.ts:5:1)
      at Object.<anonymous> (tests/tournament/tournamentWebsocket.test.ts:20:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

PASS tests/cors.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒôí add observability to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (tests/cors.test.ts:5:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (tests/cors.test.ts:5:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (tests/cors.test.ts:5:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (tests/cors.test.ts:5:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (tests/cors.test.ts:5:1)

PASS tests/services/gnubgService.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (tests/services/gnubgService.test.ts:4:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (tests/services/gnubgService.test.ts:4:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (tests/services/gnubgService.test.ts:4:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (tests/services/gnubgService.test.ts:4:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/gnubgService.ts:12:1)
      at Object.<anonymous> (tests/services/gnubgService.test.ts:4:1)

    console.debug
      [2025-12-18T15:51:59.673Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'user-1',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 4,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2025-12-18T15:51:59.675Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'user-1',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 4,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

PASS tests/gnubgQuota.test.ts
  ÔùÅ Console

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-available',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 4,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-exhausted',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:119:5)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:119:5) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:119:5)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-extras',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 1
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-reset',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 0,
        premiumQuota: 9,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-priority',
        plan: 'premium',
        consumedFrom: 'premium',
        dailyQuota: 3,
        premiumQuota: 1,
        extrasRemaining: 5
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'premium-fallback',
        plan: 'premium',
        consumedFrom: 'daily',
        dailyQuota: 3,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-standard-first',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 1,
        premiumQuota: 0,
        extrasRemaining: 3
      }

      at Logger.debug (src/utils/logger.ts:27:15)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-concurrency',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 0)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-concurrency',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 1)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-concurrency',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 2)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-concurrency',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 3)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-concurrency',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 4)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 10)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 11)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 12)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 13)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 14)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 15)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 16)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 17)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 18)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-concurrency',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 19)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 5)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 6)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 7)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 8)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 9)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 10)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 10)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 11)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 11)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 12)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 12)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 13)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 13)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 14)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 14)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 15)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 15)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 16)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 16)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 17)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 17)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 18)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 18)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 19)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:252:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 19)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:252:22)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-extra-burst',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 0)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-extra-burst',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 1)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-extra-burst',
        plan: 'free',
        consumedFrom: 'extras',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 2)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 3)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 4)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-extra-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at evaluatePosition (src/services/gnubgService.ts:336:7)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 3)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 3)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 4)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 4)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 5)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 6)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 7)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 8)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to evaluate position via GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at evaluatePosition (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:336:7)
          at async Promise.allSettled (index 9)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:286:22) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at evaluatePosition (src/services/gnubgService.ts:341:12)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:286:22)

    console.debug
      [2024-01-01T12:00:00.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-reset-burst',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 0)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 1)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 2)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 3)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 4)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.warn
      [2024-01-01T12:00:00.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 1)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 1)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 2)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 2)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 3)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 3)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 4)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 4)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 5)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 6)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 7)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 8)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.error
      [2024-01-01T12:00:00.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 9)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:320:27) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:320:27)

    console.debug
      [2024-01-01T12:30:01.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-reset-burst',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 0)

    console.debug
      [2024-01-01T12:30:01.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-reset-burst',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 1)

    console.debug
      [2024-01-01T12:30:01.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-reset-burst',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 2)

    console.debug
      [2024-01-01T12:30:01.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-reset-burst',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 3)

    console.debug
      [2024-01-01T12:30:01.000Z] [GNUBGService] DEBUG: Quota consumed {
        userId: 'free-reset-burst',
        plan: 'free',
        consumedFrom: 'daily',
        dailyQuota: 0,
        premiumQuota: 0,
        extrasRemaining: 0
      }

      at Logger.debug (src/utils/logger.ts:27:15)
          at async Promise.allSettled (index 4)

    console.warn
      [2024-01-01T12:30:01.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.warn
      [2024-01-01T12:30:01.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.warn
      [2024-01-01T12:30:01.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.warn
      [2024-01-01T12:30:01.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.warn
      [2024-01-01T12:30:01.000Z] [GNUBGService] WARN: Quota exhausted {
        userId: 'free-reset-burst',
        plan: 'free',
        quota: { dailyQuota: 0, premiumQuota: 0 }
      }

    [0m [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {
     [90m 20 |[39m     [36mconst[39m payload [33m=[39m data [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 21 |[39m     console[33m.[39mwarn([32m`[${new Date().toISOString()}] [${this.context}] WARN: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 22 |[39m   }
     [90m 23 |[39m
     [90m 24 |[39m   debug(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.warn (src/utils/logger.ts:21:13)
      at checkAndConsumeQuota (src/services/gnubgService.ts:275:14)
      at getHint (src/services/gnubgService.ts:323:7)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.error
      [2024-01-01T12:30:01.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 5)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:340:28) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 5)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.error
      [2024-01-01T12:30:01.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 6)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:340:28) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 6)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.error
      [2024-01-01T12:30:01.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 7)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:340:28) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 7)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.error
      [2024-01-01T12:30:01.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 8)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:340:28) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 8)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

    console.error
      [2024-01-01T12:30:01.000Z] [GNUBGService] ERROR: Failed to fetch hint from GNUBG QuotaExceededError: Quota IA atteint. Chaque analyse a un co├╗t. Passez Premium ou achetez des analyses suppl├®mentaires.
          at prisma_1.prisma.$transaction.isolationLevel (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:239:17)
          at processTicksAndRejections (node:internal/process/task_queues:103:5)
          at checkAndConsumeQuota (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:221:25)
          at getHint (D:\Downloads\PortableGit\gurugammon\bot\src\services\gnubgService.ts:323:7)
          at async Promise.allSettled (index 9)
          at Object.<anonymous> (D:\Downloads\PortableGit\gurugammon\bot\tests\gnubgQuota.test.ts:340:28) {
        statusCode: 429
      }

    [0m [90m 14 |[39m   error(message[33m:[39m string[33m,[39m error[33m?[39m[33m:[39m unknown) {
     [90m 15 |[39m     [36mconst[39m payload [33m=[39m error [36minstanceof[39m [33mError[39m [33m?[39m error [33m:[39m error [33m?[39m[33m?[39m [32m''[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror([32m`[${new Date().toISOString()}] [${this.context}] ERROR: ${message}`[39m[33m,[39m payload)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   }
     [90m 18 |[39m
     [90m 19 |[39m   warn(message[33m:[39m string[33m,[39m data[33m?[39m[33m:[39m unknown) {[0m

      at Logger.error (src/utils/logger.ts:16:13)
      at getHint (src/services/gnubgService.ts:328:12)
          at async Promise.allSettled (index 9)
      at Object.<anonymous> (tests/gnubgQuota.test.ts:340:28)

PASS tests/gameService.cube.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒæÑ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.cube.test.ts:1:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.cube.test.ts:1:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.cube.test.ts:1:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.cube.test.ts:1:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.cube.test.ts:1:1)

PASS tests/websocket.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: [ { key: 'ACCESS_TOKEN_SECRET', status: '18 chars' } ]

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (src/websocket/server.ts:16:1)
      at Object.<anonymous> (tests/websocket.test.ts:238:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (src/websocket/server.ts:16:1)
      at Object.<anonymous> (tests/websocket.test.ts:238:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: [ { key: 'ACCESS_TOKEN_SECRET', status: '18 chars' } ]

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:4:1)
      at Object.<anonymous> (src/websocket/server.ts:16:1)
      at Object.<anonymous> (tests/websocket.test.ts:238:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

    console.log
      [2025-12-18T15:51:59.995Z] [WebSocketServer] INFO: Started new WS session { gameId: 'game-handshake', userId: 'player-1' }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:51:59.998Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-handshake',
        userId: 'player-1',
        sessionId: 'session-1',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.012Z] [WebSocketServer] INFO: Started new WS session { gameId: 'game-move', userId: 'player-1' }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.012Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-move',
        userId: 'player-1',
        sessionId: 'session-1',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.029Z] [WebSocketServer] INFO: Started new WS session { gameId: 'game-move', userId: 'player-2' }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.030Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-move',
        userId: 'player-2',
        sessionId: 'session-3',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.035Z] [WebSocketServer] INFO: Started new WS session { gameId: 'game-replay', userId: 'player-1' }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.036Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-replay',
        userId: 'player-1',
        sessionId: 'session-1',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.038Z] [WebSocketServer] INFO: Started new WS session { gameId: 'game-replay', userId: 'player-2' }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.039Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-replay',
        userId: 'player-2',
        sessionId: 'session-3',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.042Z] [WebSocketServer] INFO: Accepted resume token {
        gameId: 'game-replay',
        userId: 'player-2',
        sessionId: 'session-3',
        lastAckSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.043Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-replay',
        userId: 'player-2',
        sessionId: 'session-3',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.043Z] [WebSocketServer] INFO: Streaming replay events { gameId: 'game-replay', userId: 'player-2', backlogSize: 1 }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.049Z] [WebSocketServer] INFO: Started new WS session { gameId: 'game-invalid', userId: 'player-1' }

      at Logger.info (src/utils/logger.ts:11:13)

    console.log
      [2025-12-18T15:52:00.049Z] [WebSocketServer] INFO: Dispatched resume handshake {
        gameId: 'game-invalid',
        userId: 'player-1',
        sessionId: 'session-1',
        lastSequence: 0
      }

      at Logger.info (src/utils/logger.ts:11:13)

PASS tests/dashboard/userDashboardController.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ­ƒöÉ encrypt with Dotenvx: https://dotenvx.com

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/userDashboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/userDashboardController.ts:3:1)
      at Object.<anonymous> (tests/dashboard/userDashboardController.test.ts:13:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/userDashboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/userDashboardController.ts:3:1)
      at Object.<anonymous> (tests/dashboard/userDashboardController.test.ts:13:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/userDashboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/userDashboardController.ts:3:1)
      at Object.<anonymous> (tests/dashboard/userDashboardController.test.ts:13:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/userDashboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/userDashboardController.ts:3:1)
      at Object.<anonymous> (tests/dashboard/userDashboardController.test.ts:13:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/lib/prisma.ts:2:1)
      at Object.<anonymous> (src/services/userDashboardService.ts:1:1)
      at Object.<anonymous> (src/controllers/userDashboardController.ts:3:1)
      at Object.<anonymous> (tests/dashboard/userDashboardController.test.ts:13:1)

    console.log
      DEBUG: lib/prisma.ts - MOCK_DB: undefined

      at Object.<anonymous> (src/lib/prisma.ts:21:9)

PASS tests/gameService.makeMove.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.makeMove.test.ts:1:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.makeMove.test.ts:1:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.makeMove.test.ts:1:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.makeMove.test.ts:1:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (tests/gameService.makeMove.test.ts:1:1)

PASS tests/dashboard/userDashboardService.test.ts
PASS tests/rules/cubeLogic.test.ts
PASS tests/matchmaking/matchmakingService.test.ts
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ÔÜÖ´©Å  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:225:22)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingService.test.ts:2:1)

    console.error
      CRITICAL: REFRESH_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:226:23)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingService.test.ts:2:1)

    console.error
      CRITICAL: ACCESS_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at Object.<anonymous> (src/config/index.ts:229:14)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingService.test.ts:2:1)

    console.warn
      WARNING: DATABASE_URL is not set. Prisma will fail to connect.

    [0m [90m 33 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(message)[33m;[39m
     [90m 34 |[39m     }
    [31m[1m>[22m[39m[90m 35 |[39m     console[33m.[39mwarn([32m`WARNING: ${message}`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 36 |[39m   }
     [90m 37 |[39m   [36mreturn[39m url [33m?[39m[33m?[39m [32m'postgresql://localhost:5432/gammon_dev'[39m[33m;[39m
     [90m 38 |[39m }[33m;[39m[0m

      at resolveDatabaseUrl (src/config/index.ts:35:13)
      at Object.<anonymous> (src/config/index.ts:230:16)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingService.test.ts:2:1)

    console.error
      CRITICAL: SESSION_TOKEN_SECRET missing in development environment. Using fallback secret. Snapshot: no SECRET-like environment variables detected

    [0m [90m 20 |[39m   [36mconst[39m secret [33m=[39m process[33m.[39menv[envKey][33m;[39m
     [90m 21 |[39m   [36mif[39m ([33m![39msecret) {
    [31m[1m>[22m[39m[90m 22 |[39m     console[33m.[39merror([32m`CRITICAL: ${envKey} missing in ${isProduction ? 'production' : 'development'} environment. Using fallback secret. Snapshot:`[39m[33m,[39m 
formatSecretSnapshot())[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 23 |[39m     [36mreturn[39m fallback[33m;[39m
     [90m 24 |[39m   }
     [90m 25 |[39m   [36mreturn[39m secret[33m;[39m[0m

      at resolveSecret (src/config/index.ts:22:13)
      at resolveSessionConfig (src/config/index.ts:200:18)
      at Object.<anonymous> (src/config/index.ts:235:12)
      at Object.<anonymous> (src/services/gameService.ts:20:1)
      at Object.<anonymous> (src/websocket/server.ts:4:1)
      at Object.<anonymous> (src/services/notificationService.ts:11:1)
      at Object.<anonymous> (src/services/matchmakingService.ts:5:1)
      at Object.<anonymous> (tests/matchmaking/matchmakingService.test.ts:2:1)

PASS tests/rules/resignationService.test.ts
PASS tests/providers/gnubgProvider.test.ts
PASS tests/elo/eloService.test.ts
PASS tests/backgammonEngine.test.ts
PASS tests/rules/matchEngine.test.ts
PASS tests/leaderboard/leaderboardService.test.ts
FAIL tests/tournament/tournamentService.test.ts
  ÔùÅ Test suite failed to run

    [96msrc/services/tournamentService.ts[0m:[93m189[0m:[93m5[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m189[0m     });
    [7m   [0m [91m    ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m189[0m:[93m6[0m - [91merror[0m[90m TS1068: [0mUnexpected token. A constructor, method, accessor, or property was expected.

    [7m189[0m     });
    [7m   [0m [91m     ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m5[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m    ~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m27[0m - [91merror[0m[90m TS1068: [0mUnexpected token. A constructor, method, accessor, or property was expected.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m                          ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m35[0m - [91merror[0m[90m TS1003: [0mIdentifier expected.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m                                  ~~~~~~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m47[0m - [91merror[0m[90m TS1144: [0m'{' or ';' expected.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m                                              ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m41[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m                                        ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m51[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m                                                  ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m39[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m                                      ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m49[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m                                                ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m40[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m                                       ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m56[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                       ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m66[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                                 ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m43[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m                                          ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m59[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                          ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m69[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                                    ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m44[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m                                           ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m54[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m                                                     ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m45[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m                                            ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m60[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m                                                           ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m70[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m                                                                     ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m44[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m                                           ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m62[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m                                                             ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m72[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m                                                                       ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m410[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m410[0m }
    [7m   [0m [91m~[0m

Summary of all failing tests
FAIL tests/tournament/tournamentService.test.ts
  ÔùÅ Test suite failed to run

    [96msrc/services/tournamentService.ts[0m:[93m189[0m:[93m5[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m189[0m     });
    [7m   [0m [91m    ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m189[0m:[93m6[0m - [91merror[0m[90m TS1068: [0mUnexpected token. A constructor, method, accessor, or property was expected.

    [7m189[0m     });
    [7m   [0m [91m     ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m5[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m    ~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m27[0m - [91merror[0m[90m TS1068: [0mUnexpected token. A constructor, method, accessor, or property was expected.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m                          ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m35[0m - [91merror[0m[90m TS1003: [0mIdentifier expected.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m                                  ~~~~~~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m199[0m:[93m47[0m - [91merror[0m[90m TS1144: [0m'{' or ';' expected.

    [7m199[0m     tournamentMatchesTotal.labels('completed').inc();
    [7m   [0m [91m                                              ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m41[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m                                        ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m202[0m:[93m51[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m202[0m   static async getStandings(tournamentId: string) {
    [7m   [0m [91m                                                  ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m39[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m                                      ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m206[0m:[93m49[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m206[0m   static async getBracket(tournamentId: string) {
    [7m   [0m [91m                                                ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m40[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m                                       ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m56[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                       ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m220[0m:[93m66[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m220[0m   static async getOverview(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                                 ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m43[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m                                          ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m59[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                          ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m235[0m:[93m69[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m235[0m   static async registerPlayer(tournamentId: string, userId: string) {
    [7m   [0m [91m                                                                    ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m44[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m                                           ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m239[0m:[93m54[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m239[0m   static async startTournament(tournamentId: string) {
    [7m   [0m [91m                                                     ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m45[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m                                            ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m60[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m                                                           ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m261[0m:[93m70[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m261[0m   static async generatePairings(tournamentId: string, round: number) {
    [7m   [0m [91m                                                                     ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m  ~~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m10[0m - [91merror[0m[90m TS1434: [0mUnexpected keyword or identifier.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m         ~~~~~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m44[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m                                           ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m62[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m                                                             ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m360[0m:[93m72[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m360[0m   static async handleMatchCompletion(gameId: string, winnerId: string) {
    [7m   [0m [91m                                                                       ~[0m
    [96msrc/services/tournamentService.ts[0m:[93m410[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m410[0m }
    [7m   [0m [91m~[0m


Test Suites: 1 failed, 27 passed, 28 total
Tests:       1 skipped, 130 passed, 131 total
Snapshots:   0 total
Time:        10.608 s
Ran all test suites.
